/**
 * STRATEGY_CONFIG
 *
 * Главный конфиг стратегического движка.
 * Все цифры управляют поведением системы:
 * - когда звать в Telegram
 * - когда звать на свидание
 * - как считать вовлечённость
 * - как реагировать на паузы
 */

export const STRATEGY_CONFIG = {

  /**
   * ===== INTEREST (ВОВЛЕЧЁННОСТЬ) =====
   *
   * Система считает базовый интерес девушки (0–10).
   * Он растёт и падает в зависимости от её поведения.
   */
  interest: {

    // Максимально возможный interest
    maxScore: 10,

    // Минимально возможный interest
    minScore: 0,

    // Стартовое значение интереса при создании диалога
    defaultScore: 3,

    /**
     * ВЕСА СИГНАЛОВ
     * Насколько каждое действие девушки влияет на interest
     */
    weights: {

      // Она задала вопрос → сильный сигнал вовлечённости
      question: 2,

      // Использует эмодзи → лёгкий позитивный сигнал
      emoji: 1,

      // Сообщение длиннее longMessageWordLimit → она вкладывается
      longMessage: 2,

      // Делится личной информацией (ключевые слова ниже)
      personalInfo: 3,

      // Очень короткий ответ (1-3 слова) → минус к интересу
      shortMessagePenalty: -1,

      // Штраф за отказ (Telegram не дала / свидание отказала)
      rejectionPenalty: -3,
    },

    /**
     * ПОРОГИ ПРИНЯТИЯ РЕШЕНИЙ
     */
    thresholds: {

      // При каком effective_interest можно предлагать Telegram
      telegram: 7,

      // При каком effective_interest можно звать на свидание
      date: 9,

      // Ниже этого значения включается режим SALVAGE (спасение диалога)
      lowInterest: 3,
    }
  },

  /**
   * ===== АНАЛИЗ СООБЩЕНИЯ =====
   *
   * Как система определяет тип сообщения девушки
   */
  message: {

    // До скольких слов сообщение считается коротким
    shortMessageWordLimit: 3,

    // После скольких слов сообщение считается длинным
    longMessageWordLimit: 10,

    /**
     * Ключевые слова, указывающие на личную информацию.
     * Если сообщение содержит их → +personalInfo к interest.
     *
     * Можно добавлять:
     * "работаю", "учусь", "живу", "люблю", "ненавижу"
     */
    personalKeywords: [
      "работаю", "учусь", "живу", "люблю", "мечтаю",
      "ненавижу", "боюсь", "хочу стать", "моя работа",
      "моя мечта", "в детстве", "планирую", "скучаю"
    ],

    // Регулярка для обнаружения эмодзи
    emojiRegex: /[\u{1F300}-\u{1FAFF}]/u
  },

  /**
   * ===== FRESHNESS (АКТУАЛЬНОСТЬ ИНТЕРЕСА) =====
   *
   * Чем дольше пауза, тем ниже effective_interest.
   * Это не обнуляет базовый interest,
   * а снижает готовность к эскалации.
   */
  freshness: {

    // Градации времени с момента последнего сообщения
    tiers: [

      // Если ответ менее чем через 2 часа → интерес максимально актуален
      { hours: 2, multiplier: 1.0 },

      // 2–8 часов → почти без потери
      { hours: 8, multiplier: 0.9 },

      // 8–24 часа → умеренное снижение
      { hours: 24, multiplier: 0.75 },

      // 24–48 часов → значительное снижение
      { hours: 48, multiplier: 0.5 },
    ],

    // Если прошло больше 48 часов
    defaultMultiplier: 0.3
  },

  /**
   * ===== PHASE ЛОГИКА =====
   *
   * Когда переходить между фазами диалога
   */
  phase: {

    // Phase 1→2: сколько HIGH_INTEREST подряд нужно
    highStreakForConnection: 2,

    // Phase 3→4: минимум обменов сообщениями после перехода в Telegram
    minMessagesForTension: 8,

    // Phase 4: при каком interest добавлять намёк на свидание в ответ
    hintDateInterest: 7,

    // Phase 4: при каком interest показать кнопку "Позвать на свидание"
    showDateButtonInterest: 10,
  },

  /**
   * ===== DECISION ENGINE =====
   *
   * Когда принимать стратегические решения
   */
  decision: {

    // Если нет ответа дольше этого времени → режим REWARM
    rewarmAfterHours: 8,

    // Минимум сообщений в Telegram перед приглашением на свидание
    minMessagesInTelegramForDate: 20
  }
}