interface PromptParams {
  platform: string;
  stage: string;
  girlInfo: string;
}

const PLATFORM_DESCRIPTIONS: Record<string, string> = {
  tinder: "Tinder — приложение для знакомств с фокусом на фото и коротких био",
  pure: "Pure — приложение для откровенных знакомств, прямой подход",
  twinby: "Twinby — приложение для знакомств с акцентом на общие интересы",
  telegram: "Telegram — мессенджер, общение более личное и прямое",
  instagram: "Instagram — социальная сеть, знакомство через контент и сторис",
  real: "Реальная жизнь — знакомство произошло офлайн, обмен контактами",
};

const STAGE_DESCRIPTIONS: Record<string, string> = {
  first: "Первое сообщение — нужно привлечь внимание и начать диалог",
  transition: "Переход в мессенджер — уже есть контакт, нужно продолжить общение",
  chatting: "Уже общаемся — нужно вывести на встречу или углубить общение",
};

export function buildSystemPrompt(): string {
  return `Ты — эксперт по знакомствам. Пишешь от лица мужчины 30+, уверенного и естественного.

СТРОГИЕ ПРАВИЛА:
- Пиши на живом русском языке
- Будь уверенным, но не высокомерным
- Используй лёгкий юмор и остроумие
- Персонализируй сообщения на основе информации о девушке
- БЕЗ банальностей типа "Привет, как дела?"
- БЕЗ пошлости и вульгарности
- БЕЗ эмодзи
- БЕЗ клише про "глаза как звёзды" и подобного
- Сообщения короткие (1-3 предложения)
- Создавай интригу и желание ответить`;
}

export function buildUserPrompt(params: PromptParams): string {
  const platformDesc = PLATFORM_DESCRIPTIONS[params.platform] || params.platform;
  const stageDesc = STAGE_DESCRIPTIONS[params.stage] || params.stage;

  return `Контекст:
- Платформа: ${platformDesc}
- Стадия общения: ${stageDesc}
- Что известно о девушке: ${params.girlInfo}

Сгенерируй 3 варианта сообщений. Каждый вариант должен быть уникальным по стилю и подходу.

Верни ТОЛЬКО JSON массив из 3 строк, без дополнительного текста:
["сообщение 1", "сообщение 2", "сообщение 3"]`;
}
